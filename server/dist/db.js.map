{"version":3,"sources":["../src/db.js"],"names":["admin","serviceAccount","process","env","FIREBASE_DATABASE_URL","require","app","callback","get","initializeApp","credential","cert","databaseURL","FIREBASE_PROJECT_ID","FIREBASE_CLIENT_EMAIL","FIREBASE_PRIVATE_KEY","db","firestore"],"mappings":";;;;;;AAAA;;IAAYA,K;;;;AACZ,IAAIC,uBAAJ;AACA,IAAI,CAACC,QAAQC,GAAR,CAAYC,qBAAjB,EAAwC;AACtCH,mBAAiBI,QAAQ,kCAAR,CAAjB;AACD;;kBAGc,UAACC,GAAD,EAAMC,QAAN,EAAmB;;AAEhC,MAAID,IAAIE,GAAJ,CAAQ,KAAR,MAAmB,aAAvB,EAAsC;AACpCR,UAAMS,aAAN,CAAoB;AAClBC,kBAAYV,MAAMU,UAAN,CAAiBC,IAAjB,CAAsBV,cAAtB,CADM;AAElBW,mBAAa;AAFK,KAApB;AAID,GALD,MAKO,IAAIN,IAAIE,GAAJ,CAAQ,KAAR,MAAmB,YAAvB,EAAqC;AAC1CR,UAAMS,aAAN,CAAoB;AAClBC,kBAAYV,MAAMU,UAAN,CAAiBC,IAAjB,CAAsB;AAChC,qBAAaT,QAAQC,GAAR,CAAYU,mBADO;AAEhC,uBAAeX,QAAQC,GAAR,CAAYW,qBAFK;AAGhC,sBAAcZ,QAAQC,GAAR,CAAYY;AAHM,OAAtB,CADM;AAMlBH,mBAAaV,QAAQC,GAAR,CAAYC;AANP,KAApB;AAQD;;AAED,MAAIY,KAAKhB,MAAMiB,SAAN,EAAT;;AAEAV,WAASS,EAAT;AACD,C","file":"db.js","sourcesContent":["import * as admin from 'firebase-admin'\r\nlet serviceAccount\r\nif (!process.env.FIREBASE_DATABASE_URL) {\r\n  serviceAccount = require('../../dev-firebase-security.json')\r\n}\r\n\r\n\r\nexport default (app, callback) => {\r\n\r\n  if (app.get('env') === 'development') {\r\n    admin.initializeApp({\r\n      credential: admin.credential.cert(serviceAccount),\r\n      databaseURL: 'https://swc-shockball.firebaseio.com/'\r\n    })\r\n  } else if (app.get('env') === 'production') {\r\n    admin.initializeApp({\r\n      credential: admin.credential.cert({\r\n        'projectId': process.env.FIREBASE_PROJECT_ID,\r\n        'clientEmail': process.env.FIREBASE_CLIENT_EMAIL,\r\n        'privateKey': process.env.FIREBASE_PRIVATE_KEY,\r\n      }),\r\n      databaseURL: process.env.FIREBASE_DATABASE_URL\r\n    })\r\n  }\r\n\r\n  let db = admin.firestore()\r\n\r\n  callback(db)\r\n}"]}