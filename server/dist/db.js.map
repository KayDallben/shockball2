{"version":3,"sources":["../src/db.js"],"names":["admin","serviceAccount","process","env","FIREBASE_DATABASE_URL","require","app","callback","get","initializeApp","credential","cert","databaseURL","FIREBASE_PROJECT_ID","FIREBASE_CLIENT_EMAIL","FIREBASE_PRIVATE_KEY","db","firestore"],"mappings":";;;;;;AAAA;;IAAYA,K;;;;AACZ,IAAIC,uBAAJ;AACA,IAAI,CAACC,QAAQC,GAAR,CAAYC,qBAAjB,EAAwC;AACtCH,mBAAiBI,QAAQ,kCAAR,CAAjB;AACD;;kBAGc,UAACC,GAAD,EAAMC,QAAN,EAAmB;;AAEhC,MAAID,IAAIE,GAAJ,CAAQ,KAAR,MAAmB,aAAvB,EAAsC;AACpCR,UAAMS,aAAN,CAAoB;AAClBC,kBAAYV,MAAMU,UAAN,CAAiBC,IAAjB,CAAsBV,cAAtB,CADM;AAElBW,mBAAa;AAFK,KAApB;AAID,GALD,MAKO,IAAIN,IAAIE,GAAJ,CAAQ,KAAR,MAAmB,YAAvB,EAAqC;AAC1CR,UAAMS,aAAN,CAAoB;AAClBC,kBAAYV,MAAMU,UAAN,CAAiBC,IAAjB,CAAsB;AAChC,qBAAaT,QAAQC,GAAR,CAAYU,mBADO;AAEhC,uBAAeX,QAAQC,GAAR,CAAYW,qBAFK;AAGhC,sBAAcZ,QAAQC,GAAR,CAAYY;AAHM,OAAtB,CADM;AAMlBH,mBAAaV,QAAQC,GAAR,CAAYC;AANP,KAApB;AAQD;;AAED,MAAIY,KAAKhB,MAAMiB,SAAN,EAAT;;AAEAV,WAASS,EAAT;AACD,C","file":"db.js","sourcesContent":["import * as admin from 'firebase-admin'\nlet serviceAccount\nif (!process.env.FIREBASE_DATABASE_URL) {\n  serviceAccount = require('../../dev-firebase-security.json')\n}\n\n\nexport default (app, callback) => {\n\n  if (app.get('env') === 'development') {\n    admin.initializeApp({\n      credential: admin.credential.cert(serviceAccount),\n      databaseURL: 'https://swc-shockball.firebaseio.com/'\n    })\n  } else if (app.get('env') === 'production') {\n    admin.initializeApp({\n      credential: admin.credential.cert({\n        'projectId': process.env.FIREBASE_PROJECT_ID,\n        'clientEmail': process.env.FIREBASE_CLIENT_EMAIL,\n        'privateKey': process.env.FIREBASE_PRIVATE_KEY,\n      }),\n      databaseURL: process.env.FIREBASE_DATABASE_URL\n    })\n  }\n\n  let db = admin.firestore()\n\n  callback(db)\n}"]}