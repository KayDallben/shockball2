{"version":3,"sources":["../../src/routes/routes.js"],"names":["routes","db","logger","profileController","loginController","teamController","fixtureController","playerController","accountController","contractController","get","req","res","listOne","list","put","update","post","create"],"mappings":";;;;;;AACA;;AAIA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAVA,IAAMA,SAAS,sBAAf;;AAEA;AAJA;;kBAce,UAACC,EAAD,EAAKC,MAAL,EAAgB;AAC7B,MAAMC,oBAAoB,gCAAsBF,EAAtB,EAA0BC,MAA1B,CAA1B;AACA,MAAME,kBAAkB,8BAAoBF,MAApB,CAAxB;AACA,MAAMG,iBAAiB,6BAAmBJ,EAAnB,EAAuBC,MAAvB,CAAvB;AACA,MAAMI,oBAAoB,gCAAsBL,EAAtB,EAA0BC,MAA1B,CAA1B;AACA,MAAMK,mBAAmB,+BAAqBN,EAArB,EAAyBC,MAAzB,CAAzB;AACA,MAAMM,oBAAoB,gCAAsBP,EAAtB,EAA0BC,MAA1B,CAA1B;AACA,MAAMO,qBAAqB,iCAAuBR,EAAvB,EAA2BC,MAA3B,CAA3B;;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBAF,SAAOU,GAAP,CAAW,UAAX,uBAAkC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9CT,sBAAkBU,OAAlB,CAA0BF,GAA1B,EAA+BC,GAA/B;AACD,GAFD;;AAIE;;;;;;;;;;;;;;;;;;;;;;;;;AAyBFZ,SAAOU,GAAP,CAAW,QAAX,EAAqB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjCR,oBAAgBS,OAAhB,CAAwBF,GAAxB,EAA6BC,GAA7B;AACD,GAFD;AAGF;;;;;;;;;;;;;;;;;AAiBEZ,SAAOU,GAAP,CAAW,QAAX,uBAAgC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5CP,mBAAeS,IAAf,CAAoBH,GAApB,EAAyBC,GAAzB;AACD,GAFD;AAGE;;;;;;;;;;;;;;;;;;;;;;;;;AAyBFZ,SAAOU,GAAP,CAAW,YAAX,uBAAoC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAChDP,mBAAeQ,OAAf,CAAuBF,GAAvB,EAA4BC,GAA5B;AACD,GAFD;;AAIA;;;;;;;;;;;;;;;;;AAiBAZ,SAAOU,GAAP,CAAW,WAAX,uBAAmC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC/CN,sBAAkBQ,IAAlB,CAAuBH,GAAvB,EAA4BC,GAA5B;AACD,GAFD;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBAZ,SAAOU,GAAP,CAAW,eAAX,uBAAuC,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnDN,sBAAkBO,OAAlB,CAA0BF,GAA1B,EAA+BC,GAA/B;AACD,GAFD;AAGA;;;;;;;;;;;;;;;;;AAiBAZ,SAAOU,GAAP,CAAW,UAAX,uBAAkC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9CL,qBAAiBO,IAAjB,CAAsBH,GAAtB,EAA2BC,GAA3B;AACD,GAFD;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBAZ,SAAOU,GAAP,CAAW,cAAX,uBAAsC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClDL,qBAAiBM,OAAjB,CAAyBF,GAAzB,EAA8BC,GAA9B;AACD,GAFD;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BAZ,SAAOe,GAAP,CAAW,cAAX,uBAAsC,UAACJ,GAAD,EAAMC,GAAN,EAAc;AAClDL,qBAAiBS,MAAjB,CAAwBL,GAAxB,EAA6BC,GAA7B;AACD,GAFD;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBAZ,SAAOU,GAAP,CAAW,eAAX,uBAAuC,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnDJ,sBAAkBK,OAAlB,CAA0BF,GAA1B,EAA+BC,GAA/B;AACD,GAFD;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCAZ,SAAOU,GAAP,CAAW,YAAX,uBAAoC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAChDH,uBAAmBK,IAAnB,CAAwBH,GAAxB,EAA6BC,GAA7B;AACD,GAFD;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBAZ,SAAOU,GAAP,CAAW,gBAAX,uBAAwC,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpDH,uBAAmBI,OAAnB,CAA2BF,GAA3B,EAAgCC,GAAhC;AACD,GAFD;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEAZ,SAAOiB,IAAP,CAAY,YAAZ,uBAAqC,UAACN,GAAD,EAAMC,GAAN,EAAc;AACjDH,uBAAmBS,MAAnB,CAA0BP,GAA1B,EAA+BC,GAA/B;AACD,GAFD;;AAIA,SAAOZ,MAAP;AACD,C","file":"routes.js","sourcesContent":["//third party libraries\r\nimport { Router } from 'express'\r\nconst routes = Router()\r\n\r\n// Internal code/packages\r\nimport authCheck from '../lib/authCheck'\r\nimport ProfileController from '../controllers/profileController'\r\nimport LoginController from '../controllers/loginController'\r\nimport TeamController from '../controllers/teamController'\r\nimport FixtureController from '../controllers/fixtureController'\r\nimport PlayerController from '../controllers/playerController'\r\nimport AccountController from '../controllers/accountController'\r\nimport ContractController from '../controllers/contractController'\r\n\r\nexport default (db, logger) => {\r\n  const profileController = new ProfileController(db, logger)\r\n  const loginController = new LoginController(logger)\r\n  const teamController = new TeamController(db, logger)\r\n  const fixtureController = new FixtureController(db, logger)\r\n  const playerController = new PlayerController(db, logger)\r\n  const accountController = new AccountController(db, logger)\r\n  const contractController = new ContractController(db, logger)\r\n\r\n  /**\r\n   * @swagger\r\n   * definitions:\r\n   *   Profile:\r\n   *     properties:\r\n   *       access_token:\r\n   *         type: \"string\"\r\n   *   Login:\r\n   *     properties:\r\n   *       authorization_code:\r\n   *         type: \"string\"\r\n   *   Team:\r\n   *     properties:\r\n   *       teamName:\r\n   *         type: \"string\"\r\n   *       teamPicUrl:\r\n   *         type: \"string\"\r\n   *       teamVenue:\r\n   *         type: \"string\"\r\n   */\r\n\r\n  /**\r\n   * @swagger\r\n   * /api/profile:\r\n   *   x-swagger-router-controller: ../controllers/profileController\r\n   *   get:\r\n   *     tags:\r\n   *       - Profile\r\n   *     description: Get the profile data for the current player. Returns a Player object. Creates a new Player if user is new.\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - access_token: access token\r\n   *         description: SWC access token of the current user\r\n   *         in: query\r\n   *         name: access_token\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Profile'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Profile\"\r\n   */\r\n  routes.get('/profile', authCheck, (req, res) => {\r\n    profileController.listOne(req, res)\r\n  })\r\n\r\n    /**\r\n   * @swagger\r\n   * /api/login:\r\n   *   x-swagger-router-controller: ../controllers/loginController\r\n   *   get:\r\n   *     tags:\r\n   *       - Login\r\n   *     description: Login the user and get player access token from SWC api\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - authorization_code: authorization code\r\n   *         description: SWC authorization code of the current user\r\n   *         in: query\r\n   *         name: authorization_code\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Login'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Login\"\r\n   */\r\n  routes.get('/login', (req, res) => {\r\n    loginController.listOne(req, res)\r\n  })\r\n/**\r\n   * @swagger\r\n   * /api/teams:\r\n   *   x-swagger-router-controller: ../controllers/teamController\r\n   *   get:\r\n   *     tags:\r\n   *       - Team\r\n   *     description: Get all teams\r\n   *     operationId: list\r\n   *     produces:\r\n   *       - application/json\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Team\"\r\n   */\r\n  routes.get('/teams', authCheck, (req, res) => {\r\n    teamController.list(req, res)\r\n  })\r\n    /**\r\n   * @swagger\r\n   * /api/teams/{id}:\r\n   *   x-swagger-router-controller: ../controllers/teamController\r\n   *   get:\r\n   *     tags:\r\n   *       - Team\r\n   *     description: Get team by id\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - id: id\r\n   *         description: team's id\r\n   *         in: query\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Team'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Team\"\r\n   */\r\n  routes.get('/teams/:id', authCheck, (req, res) => {\r\n    teamController.listOne(req, res)\r\n  })\r\n\r\n  /**\r\n   * @swagger\r\n   * /api/fixtures:\r\n   *   x-swagger-router-controller: ../controllers/fixtureController\r\n   *   get:\r\n   *     tags:\r\n   *       - Fixture\r\n   *     description: Get all fixtures\r\n   *     operationId: list\r\n   *     produces:\r\n   *       - application/json\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Fixture\"\r\n   */\r\n  routes.get('/fixtures', authCheck, (req, res) => {\r\n    fixtureController.list(req, res)\r\n  })\r\n  /**\r\n   * @swagger\r\n   * /api/fixtures/{id}:\r\n   *   x-swagger-router-controller: ../controllers/fixtureController\r\n   *   get:\r\n   *     tags:\r\n   *       - Fixture\r\n   *     description: Get fixture by id\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - id: id\r\n   *         description: fixture's id\r\n   *         in: query\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Fixture'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Fixture\"\r\n   */\r\n  routes.get('/fixtures/:id', authCheck, (req, res) => {\r\n    fixtureController.listOne(req, res)\r\n  })\r\n  /**\r\n   * @swagger\r\n   * /api/players:\r\n   *   x-swagger-router-controller: ../controllers/playerController\r\n   *   get:\r\n   *     tags:\r\n   *       - Player\r\n   *     description: Get all players\r\n   *     operationId: list\r\n   *     produces:\r\n   *       - application/json\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Player\"\r\n   */\r\n  routes.get('/players', authCheck, (req, res) => {\r\n    playerController.list(req, res)\r\n  })\r\n  /**\r\n   * @swagger\r\n   * /api/players/{id}:\r\n   *   x-swagger-router-controller: ../controllers/playerController\r\n   *   get:\r\n   *     tags:\r\n   *       - Player\r\n   *     description: Get player by id\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - id: id\r\n   *         description: player's id\r\n   *         in: query\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Player'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Player\"\r\n   */\r\n  routes.get('/players/:id', authCheck, (req, res) => {\r\n    playerController.listOne(req, res)\r\n  })\r\n\r\n  /**\r\n   * @swagger\r\n   * /api/players/{id}:\r\n   *   x-swagger-router-controller: ../controllers/playerController\r\n   *   put:\r\n   *     tags:\r\n   *       - Player\r\n   *     description: Updates a Player\r\n   *     operationId: update\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - id: id\r\n   *         description: player's id\r\n   *         in: query\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Player'\r\n   *       - name: regimen\r\n   *         description: Object with value and label string properties indicating what skill to train\r\n   *         in: query\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Player'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Player\"\r\n   */\r\n  routes.put('/players/:id', authCheck, (req, res) => {\r\n    playerController.update(req, res)\r\n  })\r\n\r\n  /**\r\n   * @swagger\r\n   * /api/accounts/{id}:\r\n   *   x-swagger-router-controller: ../controllers/accountController\r\n   *   get:\r\n   *     tags:\r\n   *       - Account\r\n   *     description: Get account by id\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - id: id\r\n   *         description: player's account id\r\n   *         in: query\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Account'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Account\"\r\n   */\r\n  routes.get('/accounts/:id', authCheck, (req, res) => {\r\n    accountController.listOne(req, res)\r\n  })\r\n\r\n  /**\r\n   * @swagger\r\n   * /api/contracts:\r\n   *   x-swagger-router-controller: ../controllers/contractController\r\n   *   get:\r\n   *     tags:\r\n   *       - Contract\r\n   *     description: Get all contracts\r\n   *     operationId: list\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - queryProp: contract property to query by\r\n   *         description: contract property to query by\r\n   *         in: query\r\n   *         name: queryProp\r\n   *         required: false\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - queryVal: contract property value to query by\r\n   *         description: contract property value to query by\r\n   *         in: query\r\n   *         name: queryVal\r\n   *         required: false\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Contract\"\r\n   */\r\n  routes.get('/contracts', authCheck, (req, res) => {\r\n    contractController.list(req, res)\r\n  })\r\n  /**\r\n   * @swagger\r\n   * /api/contracts/{id}:\r\n   *   x-swagger-router-controller: ../controllers/contractController\r\n   *   get:\r\n   *     tags:\r\n   *       - Contract\r\n   *     description: Get contract by id\r\n   *     operationId: listOne\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - id: id\r\n   *         description: contract's id\r\n   *         in: query\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *     responses:\r\n   *       200:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Contract\"\r\n   */\r\n  routes.get('/contracts/:id', authCheck, (req, res) => {\r\n    contractController.listOne(req, res)\r\n  })\r\n\r\n  \r\n  /**\r\n   * @swagger\r\n   * /api/contracts:\r\n   *   x-swagger-router-controller: ../controllers/contractController\r\n   *   post:\r\n   *     tags:\r\n   *       - Contract\r\n   *     description: Creates a new Contract\r\n   *     operationId: create\r\n   *     produces:\r\n   *       - application/json\r\n   *     parameters:\r\n   *       - acceptedDuration: time length of contract\r\n   *         description: time length of contract\r\n   *         in: query\r\n   *         name: acceptedDuration\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - currentSeason: the current season contract is created/modified in\r\n   *         description: the current season contract is created/modified in\r\n   *         in: query\r\n   *         name: currentSeason\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - playerName: name of player to be purchased\r\n   *         description: name of player to be purchased\r\n   *         in: query\r\n   *         name: playerName\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - playerUid: uid of player to be purchased\r\n   *         description: uid of player to be purchased\r\n   *         in: query\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - purchasePrice: purchasePrice of contract\r\n   *         description: purchasePrice of contract\r\n   *         in: query\r\n   *         name: purchasePrice\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - status: status of contract\r\n   *         description: status of contract\r\n   *         in: query\r\n   *         name: status\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *       - teamName: name of purchasing team\r\n   *         description: name of purchasing team\r\n   *         in: query\r\n   *         name: teamName\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract' \r\n   *       - teamUid: Uid of purchasing team\r\n   *         description: uid of purchasing team\r\n   *         in: query\r\n   *         name: teamUid\r\n   *         required: true\r\n   *         schema:\r\n   *           $ref: '#/definitions/Contract'\r\n   *     responses:\r\n   *       201:\r\n   *         description: Success\r\n   *         schema:\r\n   *           $ref: \"#/definitions/Contract\"\r\n   */\r\n  routes.post('/contracts', authCheck, (req, res) => {\r\n    contractController.create(req, res)\r\n  })\r\n\r\n  return routes\r\n}\r\n"]}