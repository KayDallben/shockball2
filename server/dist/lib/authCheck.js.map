{"version":3,"sources":["../../src/lib/authCheck.js"],"names":["swcApi","req","res","next","swcToken","query","access_token","getPlayerUid","validCombinePlayer","uid","data","character","logger","error","isAuthenticated"],"mappings":";;;;;;AACA;;;;AACA;;IAAYA,M;;;;;;2cAFZ;;;;qEAIe,iBAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,IAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,oBADO,GACIH,IAAII,KAAJ,CAAUC,YADd;AAAA;AAAA;AAAA,mBAGsBN,OAAOO,YAAP,CAAoBH,QAApB,CAHtB;;AAAA;AAGLI,8BAHK;;AAIX;AACAP,gBAAIQ,GAAJ,GAAUD,mBAAmBE,IAAnB,CAAwBC,SAAxB,CAAkCF,GAA5C;AACAR,gBAAIG,QAAJ,GAAeA,QAAf;AANW;AAAA;;AAAA;AAAA;AAAA;;AAQXQ,6BAAOC,KAAP;;AARW;AAUbV;;AAVa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeW,e;;;;SAAAA,e","file":"authCheck.js","sourcesContent":["//internal\nimport logger from './logger'\nimport * as swcApi from './swcApi'\n\nexport default async function isAuthenticated(req, res, next) {\n  const swcToken = req.query.access_token\n  try {\n    const validCombinePlayer = await swcApi.getPlayerUid(swcToken)\n    // console.log(validCombinePlayer)\n    req.uid = validCombinePlayer.data.character.uid\n    req.swcToken = swcToken\n  } catch (error) {\n    logger.error(error)\n  }\n  next()\n}"]}