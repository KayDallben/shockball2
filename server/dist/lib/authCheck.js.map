{"version":3,"sources":["../../src/lib/authCheck.js"],"names":["swcApi","req","res","next","swcToken","query","access_token","getPlayerUid","validCombinePlayer","uid","data","character","error","isAuthenticated"],"mappings":";;;;;;AACA;;;;AACA;;IAAYA,M;;;;;;2cAFZ;;;;qEAIe,iBAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,IAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,oBADO,GACIH,IAAII,KAAJ,CAAUC,YADd;AAAA;AAAA;AAAA,mBAGsBN,OAAOO,YAAP,CAAoBH,QAApB,CAHtB;;AAAA;AAGLI,8BAHK;;AAIX;AACAP,gBAAIQ,GAAJ,GAAUD,mBAAmBE,IAAnB,CAAwBC,SAAxB,CAAkCF,GAA5C;AACAR,gBAAIG,QAAJ,GAAeA,QAAf;AANW;AAAA;;AAAA;AAAA;AAAA;;AAQX,6BAAOQ,KAAP;;AARW;AAUbT;;AAVa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeU,e;;;;SAAAA,e","file":"authCheck.js","sourcesContent":["//internal\r\nimport logger from './logger'\r\nimport * as swcApi from './swcApi'\r\n\r\nexport default async function isAuthenticated(req, res, next) {\r\n  const swcToken = req.query.access_token\r\n  try {\r\n    const validCombinePlayer = await swcApi.getPlayerUid(swcToken)\r\n    // console.log(validCombinePlayer)\r\n    req.uid = validCombinePlayer.data.character.uid\r\n    req.swcToken = swcToken\r\n  } catch (error) {\r\n    logger.error(error)\r\n  }\r\n  next()\r\n}"]}