{"version":3,"sources":["../../src/lib/swcApi.js"],"names":["process","env","FIREBASE_DATABASE_URL","serviceAccount","require","SWC_CLIENT_SECRET","swcSecurity","swc_client_secret","SWC_CLIENT_ID","swc_client_id","SWC_REDIRECT_URI","swc_redirect_uri","getPlayerUid","token","get","headers","then","response","catch","swcError","Error","error","message","getAccessToken","authCode","url","method","data","stringify","code","client_id","client_secret","grant_type","redirect_uri","access_type"],"mappings":";;;;;;;AACA;;;;AACA;;;;;;AAFA;AAGA,IAAI,CAACA,QAAQC,GAAR,CAAYC,qBAAjB,EAAwC;AACtC,MAAMC,iBAAiBC,QAAQ,iCAAR,CAAvB,CADsC,CAC4B;AACnE;AACD,IAAI,CAACJ,QAAQC,GAAR,CAAYI,iBAAjB,EAAoC;AAClC,MAAMC,cAAcF,QAAQ,4BAAR,CAApB;AACAJ,UAAQC,GAAR,CAAYI,iBAAZ,GAAgCC,YAAYC,iBAA5C;AACAP,UAAQC,GAAR,CAAYO,aAAZ,GAA4BF,YAAYG,aAAxC;AACAT,UAAQC,GAAR,CAAYS,gBAAZ,GAA+BJ,YAAYK,gBAA3C;AACD;;AAED,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,SAAO,gBAAMC,GAAN,CAAU,8DAA8DD,KAAxE,EAA+E;AACpFE,aAAS;AACP,gBAAU;AADH;AAD2E,GAA/E,EAIJC,IAJI,CAIC,oBAAY;AAClB,WAAOC,QAAP;AACD,GANM,EAMJC,KANI,CAME,iBAAS;AAChB,QAAMC,WAAW,IAAIC,KAAJ,CAAUC,MAAMC,OAAhB,CAAjB;AACA,WAAOH,QAAP;AACD,GATM,CAAP;AAUD;;AAED,SAASI,cAAT,CAAwBC,QAAxB,EAAkC;AAChC,SAAO,qBAAM;AACXC,SAAK,2CADM;AAEXC,YAAQ,MAFG;AAGXC,UAAM,aAAGC,SAAH,CAAa;AACjBC,YAAML,QADW;AAEjBM,iBAAW9B,QAAQC,GAAR,CAAYO,aAFN;AAGjBuB,qBAAe/B,QAAQC,GAAR,CAAYI,iBAHV;AAIjB2B,kBAAY,oBAJK;AAKjBC,oBAAcjC,QAAQC,GAAR,CAAYS,gBALT;AAMjBwB,mBAAa;AANI,KAAb,CAHK;AAWXnB,aAAS;AACP,gBAAU;AADH;AAXE,GAAN,EAcJC,IAdI,CAcC,oBAAY;AAClB,WAAOC,QAAP;AACD,GAhBM,EAgBJC,KAhBI,CAgBE,iBAAS;AAChB,QAAMC,WAAW,IAAIC,KAAJ,CAAUC,MAAMC,OAAhB,CAAjB;AACA,WAAOH,QAAP;AACD,GAnBM,CAAP;AAoBD;;QAGCP,Y,GAAAA,Y;QACAW,c,GAAAA,c","file":"swcApi.js","sourcesContent":["//third party\r\nimport axios from 'axios'\r\nimport qs from 'qs'\r\nif (!process.env.FIREBASE_DATABASE_URL) {\r\n  const serviceAccount = require('../../../firebase-security.json') //eslint-disable-line no-unused-vars\r\n}\r\nif (!process.env.SWC_CLIENT_SECRET) {\r\n  const swcSecurity = require('../../../swc-security.json')\r\n  process.env.SWC_CLIENT_SECRET = swcSecurity.swc_client_secret\r\n  process.env.SWC_CLIENT_ID = swcSecurity.swc_client_id\r\n  process.env.SWC_REDIRECT_URI = swcSecurity.swc_redirect_uri\r\n}\r\n\r\nfunction getPlayerUid(token) {\r\n  return axios.get('http://www.swcombine.com/ws/v1.0/character/?access_token=' + token, {\r\n    headers: {\r\n      'Accept': 'application/json'\r\n    }\r\n  }).then(response => {\r\n    return response\r\n  }).catch(error => {\r\n    const swcError = new Error(error.message)\r\n    return swcError\r\n  })\r\n}\r\n\r\nfunction getAccessToken(authCode) {\r\n  return axios({\r\n    url: 'http://www.swcombine.com/ws/oauth2/token/',\r\n    method: 'POST',\r\n    data: qs.stringify({\r\n      code: authCode,\r\n      client_id: process.env.SWC_CLIENT_ID,\r\n      client_secret: process.env.SWC_CLIENT_SECRET,\r\n      grant_type: 'authorization_code',\r\n      redirect_uri: process.env.SWC_REDIRECT_URI,\r\n      access_type: 'offline'\r\n    }),\r\n    headers: {\r\n      'Accept': 'application/json'\r\n    }\r\n  }).then(response => {\r\n    return response\r\n  }).catch(error => {\r\n    const swcError = new Error(error.message)\r\n    return swcError\r\n  })\r\n}\r\n\r\nexport {\r\n  getPlayerUid,\r\n  getAccessToken\r\n}"]}